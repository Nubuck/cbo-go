[2025-06-02T04:14:21.745Z] 📄 Document type: Scanned PDF
[2025-06-02T04:14:21.745Z] 📊 Pages found: 5
[2025-06-02T04:14:21.746Z] 🖼️  Processing scanned PDF with enhanced OCR pipeline
[2025-06-02T04:14:24.390Z] 📄 Extracted 5 pages from PDF
[2025-06-02T04:14:24.391Z] 💾 Saving 5 original page images to disk
[2025-06-02T04:14:24.394Z] 💾 Original page 1 saved: debug_scanned-application_page1_original.png
[2025-06-02T04:14:24.406Z] 💾 Original page 2 saved: debug_scanned-application_page2_original.png
[2025-06-02T04:14:24.408Z] 💾 Original page 3 saved: debug_scanned-application_page3_original.png
[2025-06-02T04:14:24.414Z] 💾 Original page 4 saved: debug_scanned-application_page4_original.png
[2025-06-02T04:14:24.417Z] 💾 Original page 5 saved: debug_scanned-application_page5_original.png
[2025-06-02T04:14:24.417Z] ✅ All 5 original pages saved successfully
[2025-06-02T04:14:24.418Z] 🔍 Performing enhanced OCR with digital PDF compatibility
[2025-06-02T04:14:24.419Z] 🎨 Preprocessing image for optimal OCR quality (Simplified approach)
[2025-06-02T04:14:24.499Z] 💾 Enhanced image saved: debug_scanned-application_page1_enhanced.png
[2025-06-02T04:14:24.536Z] 📐 Enhanced image: 1786x2527 (2x scale)
[2025-06-02T04:14:24.536Z] 🎯 ImageData for Tesseract: 1786x2527, buffer=18052888 bytes
[2025-06-02T04:14:24.536Z] 🔍 Expected buffer size: 18052888 bytes (RGBA)
[2025-06-02T04:14:24.536Z] 🎯 About to load image into Tesseract:
[2025-06-02T04:14:24.536Z]    - Width: 1786
[2025-06-02T04:14:24.536Z]    - Height: 2527
[2025-06-02T04:14:24.536Z]    - Buffer length: 18052888
[2025-06-02T04:14:24.536Z]    - Expected length: 18052888
[2025-06-02T04:14:24.562Z] ✅ Image successfully loaded into Tesseract
[2025-06-02T04:14:28.713Z] 📦 Tesseract found 559 raw text boxes
[2025-06-02T04:14:28.718Z] 🔄 Normalizing 559 OCR boxes to digital PDF format
[2025-06-02T04:14:28.719Z] 💰 Financial box found: "10017007279" at (1306.0, 345.0) conf: 0.9643839001655579%
[2025-06-02T04:14:28.719Z] 💰 Financial box found: "0768323073" at (1049.0, 536.0) conf: 0.9613984823226929%
[2025-06-02T04:14:28.720Z] 💰 Financial box found: "R147" at (525.0, 1514.0) conf: 0.8301063776016235%
[2025-06-02T04:14:28.720Z] 💰 Financial box found: "R42" at (1303.0, 1516.0) conf: 0.08351501822471619%
[2025-06-02T04:14:28.720Z] 💰 Financial box found: "R5" at (1302.0, 1691.0) conf: 0.5982699394226074%
[2025-06-02T04:14:28.720Z] 💰 Financial box found: "{R326" at (1301.0, 1865.0) conf: 0.6415623426437378%
[2025-06-02T04:14:28.720Z] 💰 Financial box found: "R1" at (523.0, 1951.0) conf: 0.2057497352361679%
[2025-06-02T04:14:28.720Z] 💰 Financial box found: "29.25%" at (1300.0, 2039.0) conf: 0.7382202744483948%
[2025-06-02T04:14:28.720Z] ✅ Normalized 559 boxes to digital PDF format
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] 🗑️  Filtering out box: "" (conf: 0.949999988079071)
[2025-06-02T04:14:28.720Z] ✅ Filtered to 497 quality boxes (89% retention)
[2025-06-02T04:14:28.721Z] 📦 OCR extracted 497 bounding boxes
[2025-06-02T04:14:28.734Z] 🔧 Merged into 168 consolidated boxes
[2025-06-02T04:14:28.737Z] 🎯 Starting spatial field search with PAQ.js mapping
[2025-06-02T04:14:28.737Z] 🔍 Found 1 boxes containing case ID "10017007279"
[2025-06-02T04:14:28.738Z] 
🔍 Processing: caseId (expected: 10017007279)
[2025-06-02T04:14:28.738Z] 📋 Search labels: [Case reference no]
[2025-06-02T04:14:28.739Z] 🎯 Extracting value from "10017007279" (type: reference)
[2025-06-02T04:14:28.739Z] 🔢 Extracted number: "10017007279"
[2025-06-02T04:14:28.739Z] ✅ Direct case ID match: "10017007279"
[2025-06-02T04:14:28.739Z] 🎯 Validating: found=10017007279, expected=10017007279, type=reference
[2025-06-02T04:14:28.739Z] 🔢 Reference validation: "10017007279" === "10017007279" → true
[2025-06-02T04:14:28.739Z] ✅ VALID caseId: Found=10017007279, Expected=10017007279, Confidence=100%
[2025-06-02T04:14:28.740Z] 
🔍 Processing: loanAmount (expected: 147126.55)
[2025-06-02T04:14:28.740Z] 📋 Search labels: [Payout amount]
[2025-06-02T04:14:28.740Z] 📊 Multi-table check: loanAmount, isFinancial: false, isStaff: false
[2025-06-02T04:14:28.741Z] 🏷️  Searching for labels: [Payout amount]
[2025-06-02T04:14:28.744Z] 🔍 Trying pattern: "Payout amount"
[2025-06-02T04:14:28.745Z] 🎯 Match: "Payout amount." (score: 0.950, type: prefix) for "Payout amount"
[2025-06-02T04:14:28.745Z] ✅ Best label match: "Payout amount." (score: 0.950)
[2025-06-02T04:14:28.745Z] ✅ Label found: "Payout amount." (confidence: 95.0%)
[2025-06-02T04:14:28.746Z] 🎯 Using DIRECT VALUE MATCHING for: 147126.55
[2025-06-02T04:14:28.746Z] 🏷️  Label: "Payout amount." at (148, 1514) on page 0
[2025-06-02T04:14:28.746Z] 🎯 Extracting value from "Payout amount." (type: currency)
[2025-06-02T04:14:28.746Z] 💰 No currency found in: "Payout amount."
[2025-06-02T04:14:28.746Z] 📏 Line spacing calculation: 155 Y positions, 94 valid gaps, median: 16
[2025-06-02T04:14:28.746Z] 📦 Focused area: 8 boxes to check
[2025-06-02T04:14:28.746Z] 🎯 Extracting value from "PERSONAL LOAN PRE-AGREEMENT STATEMENT AND QUOTATION SUMMARY MONTHLY RESPONSIBILITIES." (type: currency)
[2025-06-02T04:14:28.747Z] 💰 No currency found in: "PERSONAL LOAN PRE-AGREEMENT STATEMENT AND QUOTATION SUMMARY MONTHLY RESPONSIBILITIES."
[2025-06-02T04:14:28.747Z] 🎯 Extracting value from "-" (type: currency)
[2025-06-02T04:14:28.747Z] 💰 No currency found in: "-"
[2025-06-02T04:14:28.747Z] 🎯 Extracting value from "Payout amount." (type: currency)
[2025-06-02T04:14:28.747Z] 💰 No currency found in: "Payout amount."
[2025-06-02T04:14:28.747Z] 🎯 Extracting value from "R147 126,58" (type: currency)
[2025-06-02T04:14:28.747Z] 💰 Extracted currency: "R147 126,58" → "R147 126,58" → 147126.58
[2025-06-02T04:14:28.747Z] 🎯 Validating: found=147126.58, expected=147126.55, type=currency
[2025-06-02T04:14:28.747Z] 💰 Currency/Percentage validation: diff=0.03, tolerance=0.05, valid=true, confidence=1.00
[2025-06-02T04:14:28.747Z] 💰 Extracted from "R147 126,58": 147126.58 → Match: true (confidence: 100.0%)
[2025-06-02T04:14:28.747Z] 🎉 ✅ EXACT MATCH FOUND: 147126.58 at (525.0, 1514.0)
[2025-06-02T04:14:28.747Z] 🎯 Extracting value from "as |" (type: currency)
[2025-06-02T04:14:28.747Z] 💰 No currency found in: "as |"
[2025-06-02T04:14:28.747Z] 🎯 Extracting value from "Split ‘ payout: To merchant" (type: currency)
[2025-06-02T04:14:28.747Z] 💰 No currency found in: "Split ‘ payout: To merchant"
[2025-06-02T04:14:28.747Z] 🎯 Extracting value from "Refer to SPOA" (type: currency)
[2025-06-02T04:14:28.747Z] 💰 No currency found in: "Refer to SPOA"
[2025-06-02T04:14:28.747Z] 🎯 Extracting value from "[" (type: currency)
[2025-06-02T04:14:28.747Z] 💰 No currency found in: "["
[2025-06-02T04:14:28.747Z] 🏆 Found 1 exact matches, selecting best positioned:
[2025-06-02T04:14:28.747Z] 🏆 WINNER: "R147 126,58" → 147126.58 at (525.0, 1514.0)
[2025-06-02T04:14:28.747Z]    📊 sameLine:true, toRight:true, confidence:100.0%
[2025-06-02T04:14:28.747Z] ✅ Value found: "R147 126,58"
[2025-06-02T04:14:28.747Z] 🎯 Extracting value from "R147 126,58" (type: currency)
[2025-06-02T04:14:28.747Z] 💰 Extracted currency: "R147 126,58" → "R147 126,58" → 147126.58
[2025-06-02T04:14:28.747Z] 🎯 Validating: found=147126.58, expected=147126.55, type=currency
[2025-06-02T04:14:28.747Z] 💰 Currency/Percentage validation: diff=0.03, tolerance=0.05, valid=true, confidence=1.00
[2025-06-02T04:14:28.747Z] ✅ VALID loanAmount: Found=147126.58, Expected=147126.55, Confidence=100%
[2025-06-02T04:14:28.748Z] 
🔍 Processing: instalment (expected: 5436.68)
[2025-06-02T04:14:28.748Z] 📋 Search labels: [Monthly instalment (including interest]
[2025-06-02T04:14:28.748Z] 📊 Multi-table check: instalment, isFinancial: true, isStaff: false
[2025-06-02T04:14:28.749Z] 🏷️  Searching for labels: [Monthly instalment (including interest]
[2025-06-02T04:14:28.749Z] 🔍 Trying pattern: "Monthly instalment (including interest"
[2025-06-02T04:14:28.749Z] ❌ No label matches found above threshold
[2025-06-02T04:14:28.749Z] ❌ Label not found for instalment
[2025-06-02T04:14:28.750Z] ❌ Field processing failed for instalment
[2025-06-02T04:14:28.750Z] 
🔍 Processing: interestRate (expected: 29.25)
[2025-06-02T04:14:28.751Z] 📋 Search labels: [Annual interest rate - fixed]
[2025-06-02T04:14:28.751Z] 📊 Multi-table check: interestRate, isFinancial: false, isStaff: false
[2025-06-02T04:14:28.751Z] 🏷️  Searching for labels: [Annual interest rate - fixed]
[2025-06-02T04:14:28.752Z] 🔍 Trying pattern: "Annual interest rate - fixed"
[2025-06-02T04:14:28.752Z] ❌ No label matches found above threshold
[2025-06-02T04:14:28.752Z] ❌ Label not found for interestRate
[2025-06-02T04:14:28.753Z] ❌ Field processing failed for interestRate
[2025-06-02T04:14:28.753Z] 
🔍 Processing: insurancePremium (expected: 519.16)
[2025-06-02T04:14:28.753Z] 📋 Search labels: [Credit life insurance (included in]
[2025-06-02T04:14:28.754Z] 📊 Multi-table check: insurancePremium, isFinancial: true, isStaff: false
[2025-06-02T04:14:28.754Z] 🏷️  Searching for labels: [Credit life insurance (included in]
[2025-06-02T04:14:28.754Z] 🔍 Trying pattern: "Credit life insurance (included in"
[2025-06-02T04:14:28.755Z] ❌ No label matches found above threshold
[2025-06-02T04:14:28.755Z] ❌ Label not found for insurancePremium
[2025-06-02T04:14:28.755Z] ❌ Field processing failed for insurancePremium
[2025-06-02T04:14:28.755Z] 
🔍 Processing: collectionAccountNo (expected: 1171851065)
[2025-06-02T04:14:28.756Z] 📋 Search labels: [Account number]
[2025-06-02T04:14:28.756Z] 📊 Multi-table check: collectionAccountNo, isFinancial: false, isStaff: false
[2025-06-02T04:14:28.756Z] 🏷️  Searching for labels: [Account number]
[2025-06-02T04:14:28.756Z] 🔍 Trying pattern: "Account number"
[2025-06-02T04:14:28.757Z] ❌ No label matches found above threshold
[2025-06-02T04:14:28.757Z] ❌ Label not found for collectionAccountNo
[2025-06-02T04:14:28.757Z] ❌ Field processing failed for collectionAccountNo
[2025-06-02T04:14:28.758Z] 
📊 PROCESSING SUMMARY
[2025-06-02T04:14:28.758Z] Bounding boxes: 497 → 168 (merged)
[2025-06-02T04:14:28.758Z] Fields processed: 6
[2025-06-02T04:14:28.759Z] Fields found: 2/6
[2025-06-02T04:14:28.759Z] Fields valid: 2/2
[2025-06-02T04:14:28.759Z] Success rate: 33%

============================================================
DEBUG LOG SUMMARY
============================================================
Total bounding boxes: 497
Merged boxes: 168
Fields processed: 6
Fields found: 2
Fields valid: 2
Success rate: 33%
============================================================